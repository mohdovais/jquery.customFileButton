(function(d){d.fn.customFileUploader=function(h){var f=d.extend({},d.fn.customFileUploader.defaults,h);return this.each(function(){var b=d(this),a=b.data()?d.extend({},f,b.data()):f,g,e,c;b.css({visibility:"hidden",width:0,height:0,position:"absolute"});b.wrap('<span class="'+a.wrapper_class+'" style="position: relative"/>');e=b.parent("span");e.append('<button class="'+a.button_class+'">'+a.button_text+"</button>");e.append('<label class="'+a.label_class+'"/>');c=e.children("label");a=e.children("button"); g=function(a){a.preventDefault();a.stopPropagation();c.empty();d.browser.msie?(c.siblings("input").replaceWith(c.siblings("input").clone(!0)),b=c.siblings("input")):c.siblings("input").val("")};b.on("change",function(a){a=b.val().split("/").pop().split("\\").pop();c.html(a+'<a href="#" style="color: red; text-decoration: none" class="close"> &times</a>');c.children("a.close").on("click",g).focus()});a.on("click",function(){b.trigger("click")});return this})};d.fn.customFileUploader.defaults={wrapper_class:"customFileUploader-wrapper", label_class:"customFileUploader-label",button_class:"customFileUploader-button",button_text:"Attach File"}})(jQuery);
